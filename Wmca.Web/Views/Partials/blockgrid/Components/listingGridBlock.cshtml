@using Umbraco.Extensions
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockGridItem>
@using Umbraco.Cms.Core.Models

@* News listing iwth pagination *@

@{
    var contentItem = Umbraco.AssignedContentItem;
    var searchQuery = Context.Request.Query["q"];
    var parentNode = contentItem.Key;
    var resultsPages = 4;
    var resultsInputClass = "";
}
    
    @{
        IPublishedContent area = Model.Content.Value<IPublishedContent>("area");
        if(area != null){
            parentNode = area.Key;
        }
        if(Model.Content.Value<int>("resultsPerPage") != 0){
            resultsPages = Model.Content.Value<int>("resultsPerPage");
        }
        if(Model.Content.Value<bool>("showSearchInput") == false) {
            resultsInputClass = "ds-hide";
        }
    }

   <div class="sift sift-auto-load-on-page-load data-sift-remember-criteria attribute"
         data-sift-result-partial="frontend/components/search/Change Into Action/searchResultsNoPagination"
         data-sift-result-document-type="newsArticleCia"
         data-sift-result-root="@parentNode"
         data-sift-results-per-page="@resultsPages"
         data-sift-result-sort-by="date asc" >

        <form class="sift-criteria" aria-hidden="true">
            @Html.AntiForgeryToken()
            <div class="ds-m-b-lg @resultsInputClass">
                @*<h1 id="ds-main-content" class="ds-hide-mobile">Search results</h1>*@
                <div class="ds-col-1 ds-col-md-2-3 ds-p-r-xl" style="display:flex">
                    <input aria-label="Search" name="q" type="text" class="ds-search-bar__input ds-fe-input sift-criterion" placeholder="Site search…" value="@searchQuery" data-sift-match-property="nodeName, grid, copy, introduction, summary">
                    <button class="ds-search-bar__btn" type="submit">
                        <svg><title>Search</title><use href="#ds-general-search"></use></svg>
                    </button>
                </div>
            </div>
        </form>
            <div class="sift-result ds-col-1">
        </div>
    </div>

<script src="~/scripts/sift.js" type="text/javascript"></script>

